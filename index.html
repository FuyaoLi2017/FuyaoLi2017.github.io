<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Merriweather:300,300italic,400,400italic,700,700italic|Merriweather:300,300italic,400,400italic,700,700italic|Merriweather:300,300italic,400,400italic,700,700italic|Lemon:300,300italic,400,400italic,700,700italic|Bitter:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/photo.jpeg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/photo.jpeg?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/photo.jpeg?v=5.1.4">


  <link rel="mask-icon" href="/images/photo.jpeg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Fuyao Li" type="application/atom+xml">






<meta name="description" content="Keep coding!">
<meta name="keywords" content="UC Irvine">
<meta property="og:type" content="website">
<meta property="og:title" content="Fuyao Li">
<meta property="og:url" content="http://fuyaoli.me/index.html">
<meta property="og:site_name" content="Fuyao Li">
<meta property="og:description" content="Keep coding!">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fuyao Li">
<meta name="twitter:description" content="Keep coding!">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":20,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://fuyaoli.me/">





  <title>Fuyao Li</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Fuyao Li</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">UC Irvine, Department of Computer Science, Master of Science in Networked Systems</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about-fuyao">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            about Fuyao
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-projects">
          <a href="/projects/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tasks"></i> <br>
            
            Projects
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/05/17/how-to-write-graphQL-mutation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/17/how-to-write-graphQL-mutation/" itemprop="url">How to write standard GraphQL mutations</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-17T15:10:18-07:00">
                2019-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GraphQL/" itemprop="url" rel="index">
                    <span itemprop="name">GraphQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/17/how-to-write-graphQL-mutation/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/17/how-to-write-graphQL-mutation/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/17/how-to-write-graphQL-mutation/" class="leancloud_visitors" data-flag-title="How to write standard GraphQL mutations">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Basic-steps-of-building-a-mutation-in-graphQL"><a href="#Basic-steps-of-building-a-mutation-in-graphQL" class="headerlink" title="Basic steps of building a mutation in graphQL"></a>Basic steps of building a mutation in graphQL</h1><ol>
<li>define the return value strcture.(useful error message report and status feedback).</li>
<li>Define the mutation resolve function</li>
<li>Define the input parameters and output parameters of the mutation.</li>
<li>export the queries and mutations in this file and register it in <code>index.js</code></li>
</ol>
<h1 id="An-example-of-writing-a-mutation"><a href="#An-example-of-writing-a-mutation" class="headerlink" title="An example of writing a mutation"></a>An example of writing a mutation</h1><ul>
<li>More detailed source code can be referred right here(Private Repo). The code here is modified to avoid showing the business logic.<br><a href="https://github.com/FuyaoLi2017/JavaScript-Learning/blob/master/building-mutation-in-graphql.md" target="_blank" rel="noopener">https://github.com/FuyaoLi2017/JavaScript-Learning/blob/master/building-mutation-in-graphql.md</a></li>
</ul>
<h2 id="1-Step1-Define-the-return-value"><a href="#1-Step1-Define-the-return-value" class="headerlink" title="1. Step1: Define the return value"></a>1. Step1: Define the return value</h2><ul>
<li>I have changed the code to blur the original business logic. Main idea is to show the syntax. This is suppose to support a service to update all student grade according to centain rules.</li>
<li><ol>
<li>comma(<code>,</code>) is used to separate different properties within an object, normal JS sentences are separated by line feed, or semi colon<code>;</code>.</li>
</ol>
</li>
<li><ol start="2">
<li>You need to import corresponding graphQL type if that thing exists in your code.</li>
</ol>
</li>
<li><ol start="3">
<li>When we try to create the return data structure, we need to give feedback information as much as possible to help the frontend to locate the problem. Giving fields like <code>success</code>, <code>warning</code>,<code>message</code>, <code>useful wrong output lists</code> are helpful.</li>
</ol>
</li>
<li><ol start="4">
<li>Pay attention to the indentation of the <code>oneLine</code> thing. Just one TAB behind curly braces!</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; oneLine &#125; <span class="keyword">from</span> <span class="string">'common-tags'</span></span><br><span class="line"><span class="keyword">import</span> &#123; r &#125; <span class="keyword">from</span> <span class="string">'../../services/thinky'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  GraphQLObjectType,</span><br><span class="line">  GraphQLNonNull,</span><br><span class="line">  GraphQLBoolean,</span><br><span class="line">  GraphQLString,</span><br><span class="line">  GraphQLList,</span><br><span class="line">  GraphQLID,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'../scalars'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> SubField = <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">  name: <span class="string">'subField'</span>,</span><br><span class="line">  fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">    studentID: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLNonNull(GraphQLID),</span><br><span class="line">      description: oneLine<span class="string">`</span></span><br><span class="line"><span class="string">        XXX</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    failedReason: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLNonNull(GraphQLString),</span><br><span class="line">      description: <span class="string">'XXX'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Result = <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">  name: <span class="string">'Result'</span>,</span><br><span class="line">  fields: <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">    success: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLNonNull(GraphQLBoolean),</span><br><span class="line">    &#125;,</span><br><span class="line">    warning: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLNonNull(GraphQLBoolean),</span><br><span class="line">    &#125;,</span><br><span class="line">    message: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLNonNull(GraphQLString),</span><br><span class="line">      description: oneLine<span class="string">`</span></span><br><span class="line"><span class="string">        XXX</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    failedStudentsList: &#123;</span><br><span class="line">      type: <span class="keyword">new</span> GraphQLList(SubField),</span><br><span class="line">      description: oneLine<span class="string">`</span></span><br><span class="line"><span class="string">        XXX</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Step2-Use-async-function-to-update-the-information-in-the-database"><a href="#Step2-Use-async-function-to-update-the-information-in-the-database" class="headerlink" title="Step2: Use async function to update the information in the database"></a>Step2: Use async function to update the information in the database</h2><ul>
<li><ol>
<li>If we fetch something, even if it don’t have any return sentence, it won’t be null. The length will be 0, We should check <code>student.length == 0</code> instead of <code>!student</code>.</li>
</ol>
</li>
<li><ol start="2">
<li>Different between <code>for ___ of ___</code> and <code>for ___ in ___</code></li>
</ol>
<ul>
<li><code>for ... in ...</code> iterate over the keys of the objects. For array, it should be the index, 0,1,2,3…</li>
<li><code>for ... of ...</code> iterate the values of the objects directly.</li>
<li>so the following codes are the same<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (a <span class="keyword">in</span> stuff) &#123;</span><br><span class="line">  value = stuff[a]</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (value <span class="keyword">of</span> stuff) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li><code>[]</code> is used destructure an array, this let you to separate variables.<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"> <span class="comment">// then, the value of a, b, c will be</span></span><br><span class="line"> a = <span class="number">1</span></span><br><span class="line"> b = <span class="number">2</span></span><br><span class="line"> c = <span class="number">3</span></span><br><span class="line"> <span class="comment">// if you don't want all parameters</span></span><br><span class="line"> <span class="keyword">const</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"> a = <span class="number">1</span></span><br><span class="line"> b = <span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>Also, you can use <code>...</code> to hold the rest of variables in an array. <a href="https://dev.to/sagar/three-dots---in-javascript-26ci" target="_blank" rel="noopener">https://dev.to/sagar/three-dots---in-javascript-26ci</a></p>
<ul>
<li><ol start="4">
<li>Several ways to append elements at the end of the array<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]</span><br><span class="line"><span class="comment">// (1)using push</span></span><br><span class="line">arr.push(<span class="string">"d"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// (2) using concat</span></span><br><span class="line">arr.concat([<span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"f"</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// (3) using the length</span></span><br><span class="line">arr.[arr.length] = <span class="string">"d"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><ol start="5">
<li>In the naming convention the GraphQL type, the first letter should be capitalized.</li>
</ol>
</li>
<li><ol start="6">
<li>For <code>await</code> function, we don’t need to handle the exceptions, it will handle itself in our base classes.</li>
</ol>
</li>
<li><ol start="7">
<li>Some fields of a certain graphQL type is not contained in its <code>DAO</code>, it is connected by its ID. We should use other <code>DAO</code> to fetch the things we want. Just check the rethinkdb database when the graphQL schema is not so clear. Database will have all fields we are looking for.</li>
</ol>
</li>
<li><ol start="8">
<li>Backtick usage<br>When we need to <code>console.log()</code> something, <code>quote mark</code> will work, but we can add any other extra variables.<br>with backtick, we can add extra variables. Also, <code>oneLine</code> node module can used right here to format the back tick surrounded strings.<br><a href="https://stackoverflow.com/questions/27678052/usage-of-the-backtick-character-in-javascript" target="_blank" rel="noopener">https://stackoverflow.com/questions/27678052/usage-of-the-backtick-character-in-javascript</a></li>
</ol>
</li>
<li><ol start="9">
<li>different between <code>undefined</code> and <code>null</code>.<br><code>undefined</code> means the object don’t have such a field.<br><code>null</code> means the object has such field but it is null, if you add 1 to <code>null</code>, it will become <code>1</code>. Super weird!!!</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`a is: <span class="subst">$&#123;a&#125;</span>`</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`PI is nearly <span class="subst">$&#123;<span class="built_in">Math</span>.max(a, b)&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> updateGradeLevelResolve = <span class="keyword">async</span> context =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; studentDAO, familyAccountDAO &#125; = context.dao</span><br><span class="line">  <span class="keyword">const</span> students = <span class="keyword">await</span> studentDAO.fetch()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (students.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      success: <span class="literal">false</span>,</span><br><span class="line">      message: <span class="string">'xxx'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*MAIN BUSINESS LOGIC*/</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> message = <span class="string">'Finish updating all students grade.'</span></span><br><span class="line">  <span class="keyword">let</span> warning = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">if</span> (failedStudentsList.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    message = oneLine<span class="string">`</span></span><br><span class="line"><span class="string">      Finished updating student grades, but couldn't update some.</span></span><br><span class="line"><span class="string">      See the failedStudentsList for more information.</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">    warning = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    success: <span class="literal">true</span>,</span><br><span class="line">    warning,</span><br><span class="line">    message,</span><br><span class="line">    failedStudentsList,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Step3-resolve-the-mutation"><a href="#Step3-resolve-the-mutation" class="headerlink" title="Step3: resolve the mutation"></a>Step3: resolve the mutation</h2><ul>
<li><ol>
<li>In this example, there is no input arguments. If there is, we should define and pass <code>args</code> in the resolve function.<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> updateGradeLevel = &#123;</span><br><span class="line">  type: UpdateGradeLevelResult,</span><br><span class="line">  description: oneLine<span class="string">`</span></span><br><span class="line"><span class="string">    This mutation will run once a year in June before summer camp starts.</span></span><br><span class="line"><span class="string">    All student grade level will advance one year.</span></span><br><span class="line"><span class="string">    If the grade level is between 0 - 11, add 1 to the grade level.</span></span><br><span class="line"><span class="string">    If the grade level is 12, this mutation will add 1 to the grade level and</span></span><br><span class="line"><span class="string">    change EnrollmentStatus to GRADUATED.</span></span><br><span class="line"><span class="string">    If the family has another students under grade 12. the mutation will do nothing.</span></span><br><span class="line"><span class="string">    Otherwise, change student.familyAccount.status to CLOSED.</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  resolve(obj, args, context) &#123;</span><br><span class="line">    <span class="keyword">return</span> updateGradeLevelResolve(context)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h2 id="Step4-export-the-mutations-and-queries"><a href="#Step4-export-the-mutations-and-queries" class="headerlink" title="Step4 export the mutations and queries"></a>Step4 export the mutations and queries</h2><ul>
<li><ol>
<li>export in the local file.<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> queries = &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123; updateGradeLevel &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><ol start="2">
<li>import and export in the <code>index.js</code> file to expose a more standard naming of the files.<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  queries <span class="keyword">as</span> updateGradeLevelQs,</span><br><span class="line">  mutations <span class="keyword">as</span> updateGradeLevelMs,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'./updateGradeLevel'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> queries = &#123;</span><br><span class="line">  ...updateGradeLevelQs,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  ...updateGradeLevelMs,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/05/17/how-to-write-hook-based-on-graphql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/17/how-to-write-hook-based-on-graphql/" itemprop="url">how-to-write-hook-based-on-graphql</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-17T12:35:09-07:00">
                2019-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GraphQL/" itemprop="url" rel="index">
                    <span itemprop="name">GraphQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/17/how-to-write-hook-based-on-graphql/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/17/how-to-write-hook-based-on-graphql/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/17/how-to-write-hook-based-on-graphql/" class="leancloud_visitors" data-flag-title="how-to-write-hook-based-on-graphql">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="General-Pratice-to-write-a-hook"><a href="#General-Pratice-to-write-a-hook" class="headerlink" title="General Pratice to write a hook"></a>General Pratice to write a hook</h1><ol>
<li>Define hooks in the hooks fields(the base methods are inplemented in base classes.)</li>
<li>write async functions to update the hooks</li>
</ol>
<h1 id="Purpose-of-writing-hooks"><a href="#Purpose-of-writing-hooks" class="headerlink" title="Purpose of writing hooks"></a>Purpose of writing hooks</h1><ol>
<li>when we define a schema in <code>types</code>, it is not always enough, sometimes we need to automatically increment some values or do somethings after or before we insert some records into the database. With the light weight hooks. We can realize such kind of functionalities.</li>
</ol>
<h1 id="Classfication-of-hooks"><a href="#Classfication-of-hooks" class="headerlink" title="Classfication of hooks"></a>Classfication of hooks</h1><ol>
<li>general types</li>
</ol>
<ul>
<li>create</li>
<li>update</li>
<li>archive</li>
</ul>
<ol start="2">
<li>happening time for every general type of hooks</li>
</ol>
<ul>
<li>before</li>
<li>after</li>
</ul>
<h2 id="Example-hook-of-updating"><a href="#Example-hook-of-updating" class="headerlink" title="Example hook of updating"></a>Example hook of updating</h2><h3 id="Step1-declare-a-update-after-hook"><a href="#Step1-declare-a-update-after-hook" class="headerlink" title="Step1: declare a update after hook"></a>Step1: declare a update after hook</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hooks: &#123;</span><br><span class="line">    update: &#123;</span><br><span class="line">      after: updatePostFavorite,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="Step2-write-function-to-implement"><a href="#Step2-write-function-to-implement" class="headerlink" title="Step2: write function to implement"></a>Step2: write function to implement</h3><ul>
<li><ol>
<li>In the base class, update hook have three parameters and they matches the three parameters in <code>updatePostFavorite function</code>. Therefore, there is no need to explicitly declare there are three variables in update hook above.</li>
</ol>
</li>
<li><ol start="2">
<li>use context.dao to update right information</li>
</ol>
</li>
<li><ol start="3">
<li>Notice that! With the same variable name <code>favoriteCount</code>, it can directly update the field <code>favoriteCount</code> in the post model. This is a feature of JS! I don’t the exact name of the this feature, maybe pass by value.<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">updatePostFavorite</span>(<span class="params">newFavorite, oldFavorite, context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (newFavorite.favorited === oldFavorite.favorited) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> &#123; postFavoriteDAO, postDAO &#125; = context.dao</span><br><span class="line">  <span class="keyword">const</span> post = <span class="keyword">await</span> postDAO.get(newFavorite.postId)</span><br><span class="line">  <span class="keyword">const</span> favoriteCount = post.favoriteCount + newFavorite.favorited ? <span class="number">1</span> : <span class="number">-1</span></span><br><span class="line">  <span class="keyword">await</span> postDAO.update(newFavorite.postId, &#123; favoriteCount &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/05/14/remove-duplicate-from-array-or-linkedlist/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/14/remove-duplicate-from-array-or-linkedlist/" itemprop="url">Remove duplicate elements from array or linkedlist</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-14T21:59:46-07:00">
                2019-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">Leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/14/remove-duplicate-from-array-or-linkedlist/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/14/remove-duplicate-from-array-or-linkedlist/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/14/remove-duplicate-from-array-or-linkedlist/" class="leancloud_visitors" data-flag-title="Remove duplicate elements from array or linkedlist">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>The Key idea of remove duplicate is two pointers.</p>
<h1 id="1-Remove-Duplicates-from-Sorted-Array"><a href="#1-Remove-Duplicates-from-Sorted-Array" class="headerlink" title="1. Remove Duplicates from Sorted Array"></a>1. Remove Duplicates from Sorted Array</h1><blockquote>
<p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array/" target="_blank" rel="noopener">https://leetcode.com/problems/remove-duplicates-from-sorted-array/</a></p>
</blockquote>
<p>Given a sorted array nums, remove the duplicates in-place such that each element appear only once and return the new length.<br>Do not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (nums.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[j] != nums[i]) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            nums[i] = nums[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="2-Remove-Duplicates-from-Sorted-Array-II"><a href="#2-Remove-Duplicates-from-Sorted-Array-II" class="headerlink" title="2. Remove Duplicates from Sorted Array II"></a>2. Remove Duplicates from Sorted Array II</h1><blockquote>
<p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/" target="_blank" rel="noopener">https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/</a></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// my solution</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nums.length &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> nums.length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> previous = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> currentCount = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> end = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[i] == previous &amp;&amp; currentCount &lt; <span class="number">2</span>) &#123;</span><br><span class="line">                currentCount++;</span><br><span class="line">                nums[end++] = nums[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[i] == previous &amp;&amp; currentCount &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                currentCount = <span class="number">1</span>;</span><br><span class="line">                nums[end++] = nums[i];</span><br><span class="line">                previous = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> end;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>// a more concise solution<br>// remove duplicates from a sorted array<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n : nums)</span><br><span class="line">        <span class="keyword">if</span>(i &lt; <span class="number">1</span> || n &gt; nums[i - <span class="number">1</span>])</span><br><span class="line">            nums[i++] = n;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remove Duplicates from Sorted Array II (allow duplicates up to 2):</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> n : nums)</span><br><span class="line">      <span class="keyword">if</span> (i &lt; <span class="number">2</span> || n &gt; nums[i - <span class="number">2</span>])</span><br><span class="line">         nums[i++] = n;</span><br><span class="line">   <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="3-Remove-Duplicates-from-Sorted-List"><a href="#3-Remove-Duplicates-from-Sorted-List" class="headerlink" title="3. Remove Duplicates from Sorted List"></a>3. Remove Duplicates from Sorted List</h1><blockquote>
<p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-list/" target="_blank" rel="noopener">https://leetcode.com/problems/remove-duplicates-from-sorted-list/</a></p>
</blockquote>
<p>Given a sorted linked list, delete all duplicates such that each element appear only once.</p>
<p>Example 1:</p>
<p>Input: 1-&gt;1-&gt;2<br>Output: 1-&gt;2<br>Example 2:</p>
<p>Input: 1-&gt;1-&gt;2-&gt;3-&gt;3<br>Output: 1-&gt;2-&gt;3</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// iterative</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        ListNode list = head;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">while</span>(list != <span class="keyword">null</span>) &#123;</span><br><span class="line">        	 <span class="keyword">if</span> (list.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        		 <span class="keyword">break</span>;</span><br><span class="line">        	 &#125;</span><br><span class="line">        	 <span class="keyword">if</span> (list.val == list.next.val) &#123;</span><br><span class="line">        		 list.next = list.next.next;</span><br><span class="line">        	 &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        		 list = list.next;</span><br><span class="line">        	 &#125;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// recursive</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>)<span class="keyword">return</span> head;</span><br><span class="line">        head.next = deleteDuplicates(head.next);</span><br><span class="line">        <span class="keyword">return</span> head.val == head.next.val ? head.next : head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="4-Remove-Duplicates-from-Sorted-List-II"><a href="#4-Remove-Duplicates-from-Sorted-List-II" class="headerlink" title="4. Remove Duplicates from Sorted List II"></a>4. Remove Duplicates from Sorted List II</h1><blockquote>
<p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-list-ii/" target="_blank" rel="noopener">https://leetcode.com/problems/remove-duplicates-from-sorted-list-ii/</a></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> ListNode <span class="title">deleteDuplicates</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (head == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">         ListNode dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">         dummy.next = head;</span><br><span class="line">         ListNode prev = dummy;</span><br><span class="line">         ListNode cur = head;</span><br><span class="line">         <span class="keyword">while</span> (cur != <span class="keyword">null</span>) &#123;</span><br><span class="line">             <span class="comment">// use a while loop to skip all same values for current</span></span><br><span class="line">             <span class="keyword">while</span> (cur.next != <span class="keyword">null</span> &amp;&amp; cur.val == cur.next.val) &#123;</span><br><span class="line">                 cur = cur.next;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="comment">// there is only one element without duplicate,</span></span><br><span class="line">             <span class="comment">// the code didn't enter the while loop above</span></span><br><span class="line">             <span class="comment">// can move pre to pre.next</span></span><br><span class="line">             <span class="keyword">if</span> (prev.next == cur) &#123;</span><br><span class="line">                 prev = prev.next;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="comment">// else, point the NEXT!! pointer of pre to cur.next</span></span><br><span class="line">             <span class="keyword">else</span> &#123;</span><br><span class="line">                 prev.next = cur.next;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="comment">// advance the cur pointer after each operation</span></span><br><span class="line">             cur = cur.next;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> dummy.next;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/05/11/backtracking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/11/backtracking/" itemprop="url">backtracking</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-11T22:14:45-07:00">
                2019-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/11/backtracking/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/11/backtracking/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/11/backtracking/" class="leancloud_visitors" data-flag-title="backtracking">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-Subsets"><a href="#1-Subsets" class="headerlink" title="1. Subsets"></a>1. Subsets</h1><p>Given a set of distinct integers, nums, return all possible subsets (the power set).<br>Note: The solution set must not contain duplicate subsets.</p>
<h2 id="Solution1"><a href="#Solution1" class="headerlink" title="Solution1"></a>Solution1</h2><ul>
<li><p>use layer by layer DFS</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; subsets(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span> || nums.length == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        dfs(result, <span class="keyword">new</span> ArrayList&lt;&gt;(), nums, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; current, <span class="keyword">int</span>[] nums, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index == nums.length) &#123;</span><br><span class="line">            result.add(<span class="keyword">new</span> ArrayList&lt;&gt;(current));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        current.add(nums[index]);</span><br><span class="line">        dfs(result, current, nums, index + <span class="number">1</span>);</span><br><span class="line">        current.remove(current.size() - <span class="number">1</span>);</span><br><span class="line">        dfs(result, current, nums, index + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>use for loop to traverse in DFS</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; subsets(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    backtrack(list, <span class="keyword">new</span> ArrayList&lt;&gt;(), nums, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">backtrack</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; list , List&lt;Integer&gt; tempList, <span class="keyword">int</span> [] nums, <span class="keyword">int</span> start)</span></span>&#123;</span><br><span class="line">    list.add(<span class="keyword">new</span> ArrayList&lt;&gt;(tempList));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = start; i &lt; nums.length; i++)&#123;</span><br><span class="line">        tempList.add(nums[i]);</span><br><span class="line">        backtrack(list, tempList, nums, i + <span class="number">1</span>);</span><br><span class="line">        tempList.remove(tempList.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="2-Subsets2"><a href="#2-Subsets2" class="headerlink" title="2. Subsets2"></a>2. Subsets2</h1><h1 id="3-Combinations"><a href="#3-Combinations" class="headerlink" title="3. Combinations"></a>3. Combinations</h1><blockquote>
<p><a href="https://leetcode.com/problems/combinations/" target="_blank" rel="noopener">https://leetcode.com/problems/combinations/</a></p>
</blockquote>
<p>Given two integers n and k, return all possible combinations of k numbers out of 1 … n.<br>Input: n = 4, k = 2<br>Output:<br>[[2,4],[3,4],[2,3],[1,2],[1,3],[1,4]]</p>
<ul>
<li><p>a better solution, using the input variable as counter, high vote answer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; combine(<span class="keyword">int</span> n, <span class="keyword">int</span> k) &#123;</span><br><span class="line">       List&lt;List&lt;Integer&gt;&gt; combs = <span class="keyword">new</span> ArrayList&lt;List&lt;Integer&gt;&gt;();</span><br><span class="line">       combine(combs, <span class="keyword">new</span> ArrayList&lt;Integer&gt;(), <span class="number">1</span>, n, k);</span><br><span class="line">       <span class="keyword">return</span> combs;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">combine</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; combs, List&lt;Integer&gt; comb, <span class="keyword">int</span> start, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(k==<span class="number">0</span>) &#123;</span><br><span class="line">           combs.add(<span class="keyword">new</span> ArrayList&lt;Integer&gt;(comb));</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;=n;i++) &#123;</span><br><span class="line">           comb.add(i);</span><br><span class="line">           combine(combs, comb, i+<span class="number">1</span>, n, k-<span class="number">1</span>);</span><br><span class="line">           comb.remove(comb.size()-<span class="number">1</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>My solution, using for loop to DFS</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; combine(<span class="keyword">int</span> n, <span class="keyword">int</span> k) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; k || k == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        dfs(result, <span class="keyword">new</span> ArrayList&lt;&gt;(), <span class="number">1</span>, n, k);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(List&lt;List&lt;Integer&gt;&gt; result, List&lt;Integer&gt; currentList, <span class="keyword">int</span> index, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (currentList.size() == k) &#123;</span><br><span class="line">            result.add(<span class="keyword">new</span> ArrayList&lt;&gt;(currentList));</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (index == n+<span class="number">1</span>) &#123; <span class="comment">// have reach the end of the array and has not accumlated to k elements</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = index; i &lt;= n; i++) &#123;</span><br><span class="line">            currentList.add(i);</span><br><span class="line">            dfs(result, currentList, i + <span class="number">1</span>, n, k);</span><br><span class="line">            currentList.remove(currentList.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/05/11/leetcode-975/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/11/leetcode-975/" itemprop="url">leetcode 975 - Odd Even Jump</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-11T16:30:52-07:00">
                2019-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/11/leetcode-975/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/11/leetcode-975/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/11/leetcode-975/" class="leancloud_visitors" data-flag-title="leetcode 975 - Odd Even Jump">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>You are given an integer array A.  From some starting index, you can make a series of jumps.  The (1st, 3rd, 5th, …) jumps in the series are called odd numbered jumps, and the (2nd, 4th, 6th, …) jumps in the series are called even numbered jumps.</p>
<p>You may from index i jump forward to index j (with i &lt; j) in the following way:</p>
<ul>
<li>During odd numbered jumps (ie. jumps 1, 3, 5, …), you jump to the index j such that A[i] &lt;= A[j] and A[j] is the smallest possible value.  If there are multiple such indexes j, you can only jump to the smallest such index j.</li>
<li>During even numbered jumps (ie. jumps 2, 4, 6, …), you jump to the index j such that A[i] &gt;= A[j] and A[j] is the largest possible value.  If there are multiple such indexes j, you can only jump to the smallest such index j.<br>(It may be the case that for some index i, there are no legal jumps.)</li>
<li>A starting index is good if, starting from that index, you can reach the end of the array (index A.length - 1) by jumping some number of times (possibly 0 or more than once.)</li>
</ul>
<p>Return the number of good starting indexes.</p>
<p>###Problem link:</p>
<blockquote>
<p><a href="https://leetcode.com/problems/odd-even-jump/" target="_blank" rel="noopener">https://leetcode.com/problems/odd-even-jump/</a></p>
</blockquote>
<h2 id="1-First-Solution-TreeMap-DP"><a href="#1-First-Solution-TreeMap-DP" class="headerlink" title="1. First Solution: TreeMap + DP"></a>1. First Solution: TreeMap + DP</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">oddEvenJumps</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = A.length;</span><br><span class="line">        <span class="keyword">if</span> (N &lt;= <span class="number">1</span>) <span class="keyword">return</span> N;</span><br><span class="line">        <span class="comment">// the true/false value means the that position in A can be reached in a odd/even jump</span></span><br><span class="line">        <span class="keyword">boolean</span>[] odd = <span class="keyword">new</span> <span class="keyword">boolean</span>[N];</span><br><span class="line">        <span class="keyword">boolean</span>[] even = <span class="keyword">new</span> <span class="keyword">boolean</span>[N];</span><br><span class="line">        odd[N - <span class="number">1</span>] = even[N - <span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        TreeMap&lt;Integer, Integer&gt; vals = <span class="keyword">new</span> TreeMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// put the last element into the map</span></span><br><span class="line">        vals.put(A[N - <span class="number">1</span>], N - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = N - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="comment">// get the current number in the given array</span></span><br><span class="line">            <span class="keyword">int</span> v = A[i];</span><br><span class="line">            <span class="comment">// first check the map if it has already have the same number</span></span><br><span class="line">            <span class="comment">// with same number, it can be reached directly with odd/even jump</span></span><br><span class="line">            <span class="keyword">if</span> (vals.containsKey(v)) &#123;</span><br><span class="line">            odd[i] = even[vals.get(v)];</span><br><span class="line">            even[i] = odd[vals.get(v)];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// if the map don't have such key</span></span><br><span class="line">                <span class="comment">//we can find a key a strictly lower/higher than the new value</span></span><br><span class="line">                Integer lower = vals.lowerKey(v);</span><br><span class="line">                Integer higher = vals.higherKey(v);</span><br><span class="line">                <span class="comment">// for even jump, previous value should be larger,</span></span><br><span class="line">                <span class="comment">// the value in the map(number with larger index) should be smaller</span></span><br><span class="line">                <span class="comment">// so the even[i] will be placed with the value in odd[vals.get(lower)]</span></span><br><span class="line">                <span class="keyword">if</span> (lower != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    even[i] = odd[vals.get(lower)];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// for odd jump, previous value should be smaller,</span></span><br><span class="line">                <span class="comment">// the value in the map(number with larger index) should be larger</span></span><br><span class="line">                <span class="comment">// so the odd[i] will be placed with the value in even[vals.get(higher)]</span></span><br><span class="line">                <span class="keyword">if</span> (higher != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    odd[i] = even[vals.get(higher)];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// put the value into the map after all check</span></span><br><span class="line">        vals.put(v, i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">boolean</span> b: odd)</span><br><span class="line">            <span class="keyword">if</span> (b) ans++;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/05/09/leetcode-everyday/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/09/leetcode-everyday/" itemprop="url">Leetcode Check In</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-09T11:01:42-07:00">
                2019-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">Leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/09/leetcode-everyday/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/09/leetcode-everyday/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/09/leetcode-everyday/" class="leancloud_visitors" data-flag-title="Leetcode Check In">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Check-in-Leetcode-submissions"><a href="#Check-in-Leetcode-submissions" class="headerlink" title="Check in Leetcode submissions"></a>Check in Leetcode submissions</h1><p>Today is May 9th, start from today, I will solve at least two leetcode questions every day and mark in right here. All submission will be uploaded to my Github repo.<br><a href="https://github.com/FuyaoLi2017/leetcode" target="_blank" rel="noopener">!leetcode submission repo link</a></p>
<p>For important questions and algorithms, I will try my best to summary it and post articles in my blog.</p>
<h2 id="May-9th"><a href="#May-9th" class="headerlink" title="May 9th"></a>May 9th</h2><h3 id="1-leetcode-58-Length-of-Last-Word"><a href="#1-leetcode-58-Length-of-Last-Word" class="headerlink" title="1. leetcode 58: Length of Last Word"></a>1. leetcode 58: Length of Last Word</h3><ul>
<li>link: <a href="https://leetcode.com/problems/length-of-last-word/" target="_blank" rel="noopener">https://leetcode.com/problems/length-of-last-word/</a></li>
<li>submission: <a href="https://github.com/FuyaoLi2017/leetcode/blob/master/String/leetcode_058_LengthofLastWord.java" target="_blank" rel="noopener">https://github.com/FuyaoLi2017/leetcode/blob/master/String/leetcode_058_LengthofLastWord.java</a></li>
</ul>
<h3 id="2-leetcode-59-Spiral-Matrix-II"><a href="#2-leetcode-59-Spiral-Matrix-II" class="headerlink" title="2. leetcode 59: Spiral Matrix II"></a>2. leetcode 59: Spiral Matrix II</h3><ul>
<li>link: <a href="https://leetcode.com/problems/spiral-matrix-ii/" target="_blank" rel="noopener">https://leetcode.com/problems/spiral-matrix-ii/</a></li>
<li>submission: <a href="https://github.com/FuyaoLi2017/leetcode/blob/master/Array/leetcode_059_SpiralMatrixII.java" target="_blank" rel="noopener">https://github.com/FuyaoLi2017/leetcode/blob/master/Array/leetcode_059_SpiralMatrixII.java</a></li>
</ul>
<h3 id="3-leetcode-61-Rotate-List"><a href="#3-leetcode-61-Rotate-List" class="headerlink" title="3. leetcode 61: Rotate List"></a>3. leetcode 61: Rotate List</h3><ul>
<li>link: <a href="https://leetcode.com/problems/rotate-list/" target="_blank" rel="noopener">https://leetcode.com/problems/rotate-list/</a></li>
<li>submission: <a href="https://github.com/FuyaoLi2017/leetcode/blob/master/LinkedList/leetcode_061_RotateList.java" target="_blank" rel="noopener">https://github.com/FuyaoLi2017/leetcode/blob/master/LinkedList/leetcode_061_RotateList.java</a></li>
</ul>
<h3 id="3-leetcode-63-Unique-Paths-II"><a href="#3-leetcode-63-Unique-Paths-II" class="headerlink" title="3. leetcode 63: Unique Paths II"></a>3. leetcode 63: Unique Paths II</h3><ul>
<li>link: <a href="https://leetcode.com/problems/unique-paths-ii/" target="_blank" rel="noopener">https://leetcode.com/problems/unique-paths-ii/</a></li>
<li>submission: <a href="https://github.com/FuyaoLi2017/leetcode/blob/master/DP/leetcode_063_UniquePathsII.java" target="_blank" rel="noopener">https://github.com/FuyaoLi2017/leetcode/blob/master/DP/leetcode_063_UniquePathsII.java</a></li>
</ul>
<h2 id="May-11th"><a href="#May-11th" class="headerlink" title="May 11th"></a>May 11th</h2><ul>
<li>leetcode 975</li>
<li>leetcode 78</li>
<li>leetcode 68</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/05/01/graphql-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/01/graphql-4/" itemprop="url">GraphQL-4 Building A GraphQL API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-01T15:30:20-07:00">
                2019-05-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GraphQL/" itemprop="url" rel="index">
                    <span itemprop="name">GraphQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/01/graphql-4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/01/graphql-4/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/05/01/graphql-4/" class="leancloud_visitors" data-flag-title="GraphQL-4 Building A GraphQL API">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>In this chapter, we discuss the features of a GraphQL API and mechanics behind it.</p>
<h2 id="4-1-GraphQL-API-mechanics"><a href="#4-1-GraphQL-API-mechanics" class="headerlink" title="4.1 GraphQL API mechanics"></a>4.1 GraphQL API mechanics</h2><p>All GraphQL APIs offer a number features that we need to understand in order build GraphQL APIs. The heart of this configuration is the GraphQL schema with its type definition.</p>
<ol>
<li>GraphQL Validation: Any request that is received by a GraphQL API, is first syntactically validated against the GraphQL SCHEMA.</li>
<li>GraphQL Execution: After the request has been validated, it needs to be interpreted and execute by the server to create a response.</li>
</ol>
<ul>
<li>Execution of queries: The graphQL SERVER returns a result that structurally mirrors the shape of the requested query. Before sending to the client, the server serializes the result, typically in JSON format.<ul>
<li>Creating a response to a query is actually a traversal of the graph.</li>
<li>Resolver functions: the resolver function is called recursively. For each of the subgraphs produced as output. A subgraph is an instance of a certain type. When such a subgraph is processed, the resolver function of its corresponding type is called. If the resolver function for a certain subgraph produces a scalar value like a string or number, the recursion terminates in that branch. The resolver function receive three arguments.<ul>
<li>obj: the parent object of the fields being resolved(graphQL query/mutation/subscription).(often <code>null</code> or left out).</li>
<li>args: the arguements provided to the fields in the graphQL query/mutation/subscription.</li>
<li>context: holds important contextual information, such as authenticated user and access to a database.</li>
</ul>
</li>
<li>Execution of subscription: There is no confirmation response. A response is only generated when the event actually occurs. The best practice to realize this bidirectional communication via teh webSocket protocol.</li>
</ul>
</li>
</ul>
<h2 id="4-2-GraphQL-server-architecture"><a href="#4-2-GraphQL-server-architecture" class="headerlink" title="4.2 GraphQL server architecture"></a>4.2 GraphQL server architecture</h2><h3 id="4-2-1-Green-Field-case-without-involving-any-existing-legacy-systems"><a href="#4-2-1-Green-Field-case-without-involving-any-existing-legacy-systems" class="headerlink" title="4.2.1 Green Field case: without involving any existing legacy systems"></a>4.2.1 Green Field case: without involving any existing legacy systems</h3><p>There can be multiple API endpoints lying above business logic.<br>RPC APIs, REST APIs, GraphQL APIs =&gt; Business logic =&gt; DB</p>
<h3 id="4-2-2-Legacy-case"><a href="#4-2-2-Legacy-case" class="headerlink" title="4.2.2 Legacy case"></a>4.2.2 Legacy case</h3><p>Cases we need to deal with existing legacy services and databases.</p>
<h2 id="4-3-GraphQL-API-design-methodology"><a href="#4-3-GraphQL-API-design-methodology" class="headerlink" title="4.3 GraphQL API design methodology"></a>4.3 GraphQL API design methodology</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/04/19/graphql-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/19/graphql-3/" itemprop="url">GraphQL-3 GraphQL query language</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-19T15:45:24-07:00">
                2019-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GraphQL/" itemprop="url" rel="index">
                    <span itemprop="name">GraphQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/19/graphql-3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/04/19/graphql-3/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/04/19/graphql-3/" class="leancloud_visitors" data-flag-title="GraphQL-3 GraphQL query language">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="3-1-Patterns"><a href="#3-1-Patterns" class="headerlink" title="3.1 Patterns"></a>3.1 Patterns</h2><p>GraphQL queries consist of one or more patterns which are matched agianst the big graph containing all the data on the server.</p>
<p>A pattern is expressed in terms of the relationships between objects and the fields the objects contain.</p>
<p>Multi-level hierarchies can be built because a field can also be an object which contains its own fields.</p>
<h2 id="3-2-GraphQL-methods"><a href="#3-2-GraphQL-methods" class="headerlink" title="3.2 GraphQL methods"></a>3.2 GraphQL methods</h2><ol>
<li><strong>query</strong> is used for retrieval, for reading data(see 3.3)</li>
<li><strong>mutation</strong> is used for modification, for writing data (see 3.4)</li>
<li><strong>subscription</strong> is used for notification of changed data (see 3.5)</li>
</ol>
<h2 id="3-3-GraphQL-Query"><a href="#3-3-GraphQL-Query" class="headerlink" title="3.3 GraphQL Query"></a>3.3 GraphQL Query</h2><p>To read data with graphQL, the client uses the query method.</p>
<p>In the pattern of this query, the client has to explicitly specify all the object and fields it is interested in.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">    books &#123;</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Executing the query might result in the following data, which is returned in JSON format.</li>
<li>For graphQL, query and response have the same shape. The query is comparable to a template in a template language.</li>
<li>Just like functions in JS, queries can be anonymous or named. If a query is given a name, it allows us identify it easier later on.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query myBookQuery &#123;</span><br><span class="line">    books &#123;</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-3-1-Objects"><a href="#3-3-1-Objects" class="headerlink" title="3.3.1 Objects"></a>3.3.1 Objects</h3><ul>
<li>Inside the query method, one or more objects can be retrieved.</li>
<li>An object can not be retrieved without explicitly specifying the fields that should be returned.</li>
</ul>
<h3 id="3-3-2-Fields"><a href="#3-3-2-Fields" class="headerlink" title="3.3.2 Fields"></a>3.3.2 Fields</h3><ul>
<li>Objects have fields of their own, primitives do not.</li>
<li>The types of the fields are objects, array or a primitive type.</li>
<li><p>The query language does not ditinguish between lists and single elements, such as primitives or objects. If the fields is a list, its fields are actually the fields of each element in the list.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">    books &#123;</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>If field has further fields itself, we can create a new level of nesting. The result tree gets deeper.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">    books &#123;</span><br><span class="line">        title</span><br><span class="line">        author [</span><br><span class="line">            name</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-3-3-Arguments"><a href="#3-3-3-Arguments" class="headerlink" title="3.3.3 Arguments"></a>3.3.3 Arguments</h3><ul>
<li>An argument is used to put constraints on objects. Only objects which satisfy the constraints imposed by the argument are included in the result.</li>
<li>An argument in GraphQL is comparable to a <strong>WHERE</strong> in SQL.</li>
<li>In graphQL, the arguments are identified and passed in by their name.(id in our example)</li>
</ul>
<h3 id="3-3-4-Alias"><a href="#3-3-4-Alias" class="headerlink" title="3.3.4 Alias"></a>3.3.4 Alias</h3><ul>
<li>To avoid name confilct, we cna rename a fields with an alias.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">    book_by_id (id:&quot;1234&quot;) &#123;</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">    second_book: book_by_id (id:&quot;5678&quot;) &#123;</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-3-5-Fragments"><a href="#3-3-5-Fragments" class="headerlink" title="3.3.5 Fragments"></a>3.3.5 Fragments</h3><ul>
<li>Some queries contain repeating elements. In this case, it is tedious to get consistent in the first palce and tedious to maintain consistency.</li>
<li>Repeating elements of a query can be factored out into socalled fragments.</li>
<li><p>Fragments need to be defined once (using <strong>fragment</strong> keyword) and can be applied mulitple times (using the … keyword)</p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><p>We can rewrite the previous example with the following code sample.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">    book_by_id (id:&quot;1234&quot;) &#123;</span><br><span class="line">        ...bookinfo</span><br><span class="line">    &#125;</span><br><span class="line">    second_book: book_by_id (id:&quot;5678&quot;) &#123;</span><br><span class="line">        ...bookinfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment bookinfo on Book &#123;</span><br><span class="line">    title</span><br><span class="line">    author &#123;</span><br><span class="line">        name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Note, that a fragment is defined for a specific type. (see section 2.3),in our example, the fragment is specific for a Book.</p>
</li>
</ul>
<h3 id="3-3-6-Inline-Fragments"><a href="#3-3-6-Inline-Fragments" class="headerlink" title="3.3.6 Inline Fragments"></a>3.3.6 Inline Fragments</h3><ul>
<li>Inline fragment are used to distinguish different types. It is similar to an <strong>instanceof</strong> operator in OOP languages.</li>
<li>Inline fragments are for ploymorphism, i.e. for <strong>interface</strong> and <strong>union</strong> types.</li>
<li>With inline fragments, we can check the type of an object at runtime.</li>
</ul>
<h4 id="Example-of-using-inline-fragment-in-interface"><a href="#Example-of-using-inline-fragment-in-interface" class="headerlink" title="Example of using inline fragment in interface"></a>Example of using inline fragment in interface</h4><ul>
<li>To access the private-owned fields of implementation type of interfaces. We need to use inline fragments.</li>
<li><p>We first define an interface and two implementation types.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface Document &#123;</span><br><span class="line">    title: String,</span><br><span class="line">    text: String,</span><br><span class="line">    authors: [Author]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Book implements Document &#123;</span><br><span class="line">    id: ID!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Article implements Document &#123;</span><br><span class="line">    magazine: String!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Query &#123;</span><br><span class="line">    readingList: [Document]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>If we want to access the id field for Book or magazine field for article, we need to specify which type it really belongs to, we need to use inline fragment in this case.</p>
</li>
<li><p>The query format should be as follows.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">    readingList &#123;</span><br><span class="line">        title</span><br><span class="line">        text</span><br><span class="line">        authors&#123;</span><br><span class="line">            name</span><br><span class="line">        &#125;</span><br><span class="line">        ... on Book &#123;</span><br><span class="line">            id</span><br><span class="line">        &#125;</span><br><span class="line">        ... on Article &#123;</span><br><span class="line">            magazine</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>For interfaces, we use use inline fragments to access additional fields.</p>
</li>
<li>For union types, since a union in general share no fields. Inline fragment have to be used for accessing any fields in a union.</li>
</ul>
<h3 id="3-3-7-Variables"><a href="#3-3-7-Variables" class="headerlink" title="3.3.7 Variables"></a>3.3.7 Variables</h3><ul>
<li>Variables can be used to pass different values into a query. When this value needs to be changed, the query itself can stay as it is.</li>
<li><p>Format <code>{$variable name}: {type of the bookID}[!,nothing(means whether this is a required parameter)] [= default value]</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query getSpecificBook ($BookID: String = &quot;1234&quot;) &#123;</span><br><span class="line">    book_by_id (id: $bookID) &#123;</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Variable need to have a type (primitive or object type)</p>
</li>
</ul>
<h3 id="3-3-8-Directives"><a href="#3-3-8-Directives" class="headerlink" title="3.3.8 Directives"></a>3.3.8 Directives</h3><ul>
<li>Directives can be used to dynamically include or exclude a part of a query.</li>
<li>Dynamically means depending on the value of boolean variable. This boolean variable has to be decleared just like any other variables.</li>
<li>There are two types of directives: one to include (@include keyword) a part of the query and one to exclude (@skip keywords) a part of the query.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query getBooks($flag: boolean) &#123;</span><br><span class="line">    books&#123;</span><br><span class="line">        title</span><br><span class="line">        id @include(if: $flag)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>The above examples includes the id fields only if the value <code>$flag</code> is <code>true</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query getBooks($flag: boolean) &#123;</span><br><span class="line">    books&#123;</span><br><span class="line">        title</span><br><span class="line">        id @skip(if: $flag)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The above example is the reverse meaning for the first example.</p>
<h2 id="3-4-GraphQL-mutations"><a href="#3-4-GraphQL-mutations" class="headerlink" title="3.4 GraphQL mutations"></a>3.4 GraphQL mutations</h2><ul>
<li>The mutation method is used for modifying, adding or writing data on the server with GraphQL.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mutation &#123;</span><br><span class="line">    addBook (title: &quot;New Book&quot;) &#123;</span><br><span class="line">        id</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-5-GraphQL-Subscirption"><a href="#3-5-GraphQL-Subscirption" class="headerlink" title="3.5 GraphQL Subscirption"></a>3.5 GraphQL Subscirption</h2><ul>
<li>Modern clients need to get near real-time updates that get triggered when something changes on the server.</li>
<li>REST does not provide any built-in support for such notifications from the server; thus notifications are often realized by polling or by webhooks. You can refer more details about webhooks in the below resources.</li>
</ul>
<blockquote>
<p>Book, Webhooks - Events for REST APIs</p>
</blockquote>
<blockquote>
<p><a href="https://sendgrid.com/blog/whats-webhook/" target="_blank" rel="noopener">https://sendgrid.com/blog/whats-webhook/</a></p>
</blockquote>
<ul>
<li>With polling, the client periodically sends requests to the server. The client usually needs to poll on an endpoint that returns a list of elements and compares the retrieved list against the previously retrieved list in order to find the new elements.(expensive operation)</li>
<li>With webhooks, the server calls the client, whenever the resources becomes available. To set this up, the client first needs to register an endpoint that gets called by the server. The client needs to be able to expose this endpoint that can receive the events.</li>
</ul>
<h3 id="GraphQL-implementation"><a href="#GraphQL-implementation" class="headerlink" title="GraphQL implementation"></a>GraphQL implementation</h3><ul>
<li>GraphQL offers subscriptions as a built-in mechanism for realizing notifications.</li>
<li><p>First step: client need to send a subscription request to the graphQL API. The request specfies both the event to observe and the data.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">subscription &#123;</span><br><span class="line">    bookAdded &#123;</span><br><span class="line">        id</span><br><span class="line">        title</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>When to trigger?</p>
<ul>
<li>In most cases, notification is triggered by a modification of the data inside the graph, i.e. mutation. This means an event handler needs to be installed inside the implementation of the mutation.</li>
<li>In rare cases, notifcation can be triggered by an external event, which is direclty accessible inside the graph or only accessible in aggregated form. An example is sensor data, of which a single measurement may be used as a trigger, whereas the graph only contains aggredated sensor data and no single measurements.</li>
</ul>
</li>
</ul>
<h2 id="I-still-have-some-questions-regarding-how-to-implement-the-Subscriptions-with-GraphQL-Remaining-to-be-explored"><a href="#I-still-have-some-questions-regarding-how-to-implement-the-Subscriptions-with-GraphQL-Remaining-to-be-explored" class="headerlink" title="I still have some questions regarding how to implement the Subscriptions with GraphQL! Remaining to be explored!"></a>I still have some questions regarding how to implement the Subscriptions with GraphQL! Remaining to be explored!</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/04/14/graphql-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/14/graphql-2/" itemprop="url">GraphQL-2 GraphQL Schema Language</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-14T19:57:36-07:00">
                2019-04-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GraphQL/" itemprop="url" rel="index">
                    <span itemprop="name">GraphQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/14/graphql-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/04/14/graphql-2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/04/14/graphql-2/" class="leancloud_visitors" data-flag-title="GraphQL-2 GraphQL Schema Language">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="GraphQL-Type-System"><a href="#GraphQL-Type-System" class="headerlink" title="GraphQL Type System"></a>GraphQL Type System</h2><p>GraphQL have strong type systems. A field can be amrked with an exclamation mark ! to indicate that the field is obligatory (will not be null). Otherwise, it will be nillable (optional fields).</p>
<ul>
<li>During execution/resolutoin of a query, the type system helps to determine what to do next.</li>
<li>When crafting queries, the introspection mechanism provided through the type system, allows us to do syntax directly editing and guide us with respect to what is possible and available.</li>
</ul>
<h2 id="Root-types"><a href="#Root-types" class="headerlink" title="Root types"></a>Root types</h2><p>Root types can be used as the starting point for a certain operation.</p>
<ul>
<li>Query</li>
<li>Mutation</li>
<li>Subscription<h3 id="Notice"><a href="#Notice" class="headerlink" title="Notice"></a>Notice</h3>Every graphQL implementation must ahve define a query and a mutation and subscription can be optional.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">    books: [Book]</span><br><span class="line">    book(title:String!): Book</span><br><span class="line">    book_by_id(id:ID!):Book</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Mutation &#123;</span><br><span class="line">    addBook(title: String!): Book</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Subscription &#123;</span><br><span class="line">    bookAdded: Book</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Scalar-Types"><a href="#Scalar-Types" class="headerlink" title="Scalar Types"></a>Scalar Types</h2><h3 id="built-in-GraphQL-scalar-types"><a href="#built-in-GraphQL-scalar-types" class="headerlink" title="built-in GraphQL scalar types"></a>built-in GraphQL scalar types</h3><ul>
<li>int</li>
<li>float</li>
<li>boolean</li>
<li>String</li>
<li>ID (used uniquely identify an object)</li>
</ul>
<h3 id="Custom-scalar-types"><a href="#Custom-scalar-types" class="headerlink" title="Custom scalar types"></a>Custom scalar types</h3><ul>
<li>Isbn (example)</li>
<li>[Author] (square brackets represent a list of things)</li>
</ul>
<h2 id="Array-representation"><a href="#Array-representation" class="headerlink" title="Array representation"></a>Array representation</h2><ul>
<li>Used to express a list of objects</li>
<li>[int]</li>
<li>[Book]</li>
</ul>
<h2 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h2><p>An enum has a limited set of values it can possibly to take on.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enum trafficLight &#123;</span><br><span class="line">    RED</span><br><span class="line">    GREEN</span><br><span class="line">    YELLOW</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h2><ul>
<li><p>An interface is similar to a type definition, it defines a list of fields, but it can’t be instantiated.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface Document &#123;</span><br><span class="line">    title: String</span><br><span class="line">    text: String</span><br><span class="line">    authors: [Author]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>A regular type that implements the interface can extend the interface.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Book implements Document &#123;</span><br><span class="line">    id: ID!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>The implementing type automatically contains the fields defined in the interface, they don’t need to be mentioned explicitly.</li>
<li>To access the additional fields of a type implementing an interface in a query, we always need to make a distinction by type using inline fragments.(refer to section3.3.6)</li>
</ul>
<h2 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h2><ul>
<li>A <em>Union</em> is a common type for serveral defining types. If an object is of a union type, it could be any of it s defining types.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union Product = Book | Software | Bread</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Differences-between-Union-and-interfaces"><a href="#Differences-between-Union-and-interfaces" class="headerlink" title="Differences between Union and interfaces"></a>Differences between Union and interfaces</h3><ul>
<li>interface is to express common fields</li>
<li>union don’t need to have fields in common</li>
<li>To access the fields of a union type, we need to make a distinction by type using in the inline fragments.(section3.3.6)</li>
</ul>
<h2 id="Input-Types"><a href="#Input-Types" class="headerlink" title="Input Types"></a>Input Types</h2><p>Input types are used for passing input data in the form of arguments. Input types are used in mutations. When an instance of an input type is serialized, the data is formatted in JSON syntax.</p>
<ul>
<li>It looks like the definition of regular object types, but with keyword <strong>input</strong> instead of <strong>type</strong>.</li>
<li>!!!! Input types can’t have fields of an object type, only scalar types, list types, and other input types.</li>
<li>To prevent mixing, it is a useful convention, to amrk input types, e.g. by using the postfix Input.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">input BookInput &#123;</span><br><span class="line">    title: String</span><br><span class="line">    authors: [AuthorInput]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">input AuthorInput &#123;</span><br><span class="line">    name: String</span><br><span class="line">    books: [BookInput]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fuyaoli.me/2019/04/07/inline-comment-in-Github-PR/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Fuyao Li">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fuyao Li">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/07/inline-comment-in-Github-PR/" itemprop="url">inline comment in Github PR</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-07T17:13:40-07:00">
                2019-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Github/" itemprop="url" rel="index">
                    <span itemprop="name">Github</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/07/inline-comment-in-Github-PR/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/04/07/inline-comment-in-Github-PR/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/04/07/inline-comment-in-Github-PR/" class="leancloud_visitors" data-flag-title="inline comment in Github PR">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Github-Feature：-inline-comment-in-Github-PR"><a href="#Github-Feature：-inline-comment-in-Github-PR" class="headerlink" title="Github Feature： inline comment in Github PR"></a>Github Feature： inline comment in Github PR</h3><ul>
<li>I didn’t notice this before and I think this is a very good feature. It could give suggestions regarding specific lines.</li>
<li><p>The suggestioned lines can be commited directly. It is very convenient to use.<br><img src="https://res.cloudinary.com/dbuk0to55/image/upload/v1554689790/inlineSuggestion.png" alt="alter text"></p>
</li>
<li><p>Refer to this <a href="https://twitter.com/github/status/1053360435074949120" target="_blank" rel="noopener">link</a> for more detailed GIF.</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/uploads/avatar.jpeg" alt="Fuyao Li">
            
              <p class="site-author-name" itemprop="name">Fuyao Li</p>
              <p class="site-description motion-element" itemprop="description">Keep coding!</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/FuyaoLi2017" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:fuyaol@uci.edu" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/profile.php?id=100011662450628" target="_blank" title="Facebook">
                      
                        <i class="fa fa-fw fa-facebook"></i>Facebook</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.linkedin.com/in/fuyaoli/" target="_blank" title="Linkedin">
                      
                        <i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fuyao Li</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://fuyaoli-me.disqus.com/count.js" async></script>
    

    

  




	





  














  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("oyVGHDUiweJcdb6f77vUF4CB-gzGzoHsz", "JGy6gqvMiCEed9xS4df4WvQA");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
